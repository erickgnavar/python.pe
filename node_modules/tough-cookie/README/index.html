
  <!DOCTYPE html>
<html lang="es" data-accent-color="tomato" data-content_root="../../../">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>tough-cookie - Python Perú</title>
    <link rel="shortcut icon" href="../../../_static/favicon-48x48.png"/><link rel="author" title="Sobre este documento" href="../../../about/" /><link rel="index" title="Índice" href="../../../genindex/" /><link rel="search" title="Búsqueda" href="../../../search/" />
      <link rel="canonical" href="https://python.pe/node_modules/tough-cookie/README/" />

  <script>
    function setColorMode(t){let e=document.documentElement;e.setAttribute("data-color-mode",t);let a=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,s=t;"auto"===t&&(s=a?"dark":"light"),"light"===s?(e.classList.remove("dark"),e.classList.add("light")):(e.classList.remove("light"),e.classList.add("dark"))}
    setColorMode(sessionStorage._theme||"auto");
  </script><link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=aecf457f" />
    <link rel="stylesheet" type="text/css" href="../../../_static/shibuya.css?v=8835306a" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../../_static/tabs.css?v=a5c4661c" />
    <link rel="stylesheet" type="text/css" href="../../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
    <link media="print" rel="stylesheet" type="text/css" href="../../../_static/print.css?v=20ff2c19" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/markdown.css?v=c2aafb25" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --sy-f-text: "Inter", var(--sy-f-sys), var(--sy-f-cjk), sans-serif;
  --sy-f-heading: "Inter", var(--sy-f-sys), var(--sy-f-cjk), sans-serif;
}
</style>
    
<meta name="robots" content="follow, index">
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="tough-cookie" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://www.python.pe/node_modules/tough-cookie/README/" />
<meta property="og:site_name" content="Python Perú" />
<meta property="og:description" content="RFC 6265 Cookies and CookieJar for Node.js npm package Build Status Synopsis: Why the name? NPM modules cookie, cookies and cookiejar were already taken. Installation: It’s so easy! Install with np..." />
<meta property="og:image:width" content="1146" />
<meta property="og:image:height" content="600" />
<meta property="og:image" content="https://www.python.pe/_images/social_previews/summary_node_modules_tough-cookie_README_bbc2bd30.png" />
<meta property="og:image:alt" content="RFC 6265 Cookies and CookieJar for Node.js npm package Build Status Synopsis: Why the name? NPM modules cookie, cookies and cookiejar were already taken. Ins..." />
<meta name="description" content="RFC 6265 Cookies and CookieJar for Node.js npm package Build Status Synopsis: Why the name? NPM modules cookie, cookies and cookiejar were already taken. Installation: It’s so easy! Install with np..." />
<meta name="twitter:card" content="summary_large_image" />


  
</head>
<body><div class="document"><div class="sy-head">
  <div class="sy-head-blur"></div>
  <div class="sy-head-inner sy-container mx-auto">
    <a class="sy-head-brand mr-4" href="../../../">
      <img class="light-logo" src="../../../_static/logo.svg" alt="Python Perú" height="28" />
      <img class="dark-logo" src="../../../_static/logo.svg" alt="Python Perú" height="28" />
      <strong>Python Perú</strong>
    </a>
    <div class="sy-head-links" id="NavLinks">
      <nav class="sy-head-nav"></nav>
      <div class="sy-head-extra flex items-center print:hidden">
<form class="searchbox flex items-center" action="../../../search/" method="get">
  <input type="text" name="q" placeholder="Búsqueda" />
  <kbd>/</kbd>
</form>
        
        
        <div class="sy-head-social flex items-center">
        </div>
      </div>
    </div>
    <div class="sy-head-actions flex items-center shrink-0 print:hidden">
      <button class="js-theme theme-switch flex items-center"
        data-aria-auto="Cambiar a modo claro"
        data-aria-light="Cambiar a modo oscuro"
        data-aria-dark="Cambiar a modo aŭtomata">
        <i class="i-icon theme-icon"></i>
      </button>
      <button class="md:hidden flex items-center js-menu" aria-label="Menu" type="button" aria-controls="NavLinks" aria-expanded="false">
        <div class="hamburger">
          <span class="hamburger_1"></span>
          <span class="hamburger_2 -translate-x-2"></span>
          <span class="hamburger_3 -translate-x-1"></span>
        </div>
      </button>
    </div>
  </div>
</div>
<div class="sy-page sy-container flex mx-auto">
  <aside id="lside" class="sy-lside md:w-72 md:shrink-0 print:hidden">
    <div class="sy-lside-inner md:sticky">
      <div class="sy-scrollbar p-6">
        <div class="globaltoc" data-expand-depth="1"><p class="caption" role="heading"><span class="caption-text">Secci&#243;nes</span></p>
<ul>
<li class="toctree-l1 _expand"><a class="reference internal" href="../../../about/">Acerca de la Comunidad de Python Per&#250;</a></li>
<li class="toctree-l1 _expand"><a class="reference internal" href="../../../events/">Eventos</a></li>
<li class="toctree-l1 _expand"><a class="reference internal" href="../../../code-of-conduct/">Conducta</a></li>
<li class="toctree-l1 _expand"><a class="reference internal" href="../../../code-of-conduct/#moderacion">Moderaci&#243;n</a></li>
<li class="toctree-l1 _expand"><a class="reference internal" href="../../../learning-path/">&#161;Python de cero a Pro!</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../learning-path/python-developer/">Desarrollador Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../learning-path/web-developer/">Desarrollador Web</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../learning-path/data-science/">Ciencias de Datos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../learning-path/cloud-devops/">Cloud y DevOps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../learning-path/machine-learning-ai/">Machine Learning e IA</a></li>
</ul>
</li>
</ul>
        </div>
      </div>
      
    </div>
  </aside>
  <div class="lside-overlay js-menu" role="button" aria-label="Close left sidebar" aria-controls="lside" aria-expanded="false"></div>
  <aside id="rside" class="sy-rside pb-3 w-64 shrink-0 order-last">
    <button class="rside-close js-menu xl:hidden" aria-label="Close Table of Contents" type="button" aria-controls="rside" aria-expanded="false">
      <i class="i-icon close"></i>
    </button>
    <div class="sy-scrollbar sy-rside-inner px-6 xl:top-16 xl:sticky xl:pl-0 pt-6 pb-4">
  <div class="localtoc">
    <h3>En esta página</h3>
    <ul>
<li><a class="reference internal" href="#synopsis">Synopsis</a></li>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#node-js-version-support">Node.js Version Support</a></li>
<li><a class="reference internal" href="#api">API</a><ul>
<li><a class="reference internal" href="#tough">tough</a><ul>
<li><a class="reference internal" href="#parsedate-string"><code class="docutils literal notranslate"><span class="pre">parseDate(string)</span></code></a></li>
<li><a class="reference internal" href="#formatdate-date"><code class="docutils literal notranslate"><span class="pre">formatDate(date)</span></code></a></li>
<li><a class="reference internal" href="#canonicaldomain-str"><code class="docutils literal notranslate"><span class="pre">canonicalDomain(str)</span></code></a></li>
<li><a class="reference internal" href="#domainmatch-str-domstr-canonicalize-true"><code class="docutils literal notranslate"><span class="pre">domainMatch(str,</span> <span class="pre">domStr[,</span> <span class="pre">canonicalize=true])</span></code></a></li>
<li><a class="reference internal" href="#defaultpath-path"><code class="docutils literal notranslate"><span class="pre">defaultPath(path)</span></code></a></li>
<li><a class="reference internal" href="#pathmatch-reqpath-cookiepath"><code class="docutils literal notranslate"><span class="pre">pathMatch(reqPath,</span> <span class="pre">cookiePath)</span></code></a></li>
<li><a class="reference internal" href="#parse-cookiestring-options"><code class="docutils literal notranslate"><span class="pre">parse(cookieString[,</span> <span class="pre">options])</span></code></a></li>
<li><a class="reference internal" href="#fromjson-string"><code class="docutils literal notranslate"><span class="pre">fromJSON(string)</span></code></a></li>
<li><a class="reference internal" href="#getpublicsuffix-hostname"><code class="docutils literal notranslate"><span class="pre">getPublicSuffix(hostname)</span></code></a></li>
<li><a class="reference internal" href="#cookiecompare-a-b"><code class="docutils literal notranslate"><span class="pre">cookieCompare(a,</span> <span class="pre">b)</span></code></a></li>
<li><a class="reference internal" href="#permutedomain-domain"><code class="docutils literal notranslate"><span class="pre">permuteDomain(domain)</span></code></a></li>
<li><a class="reference internal" href="#permutepath-path"><code class="docutils literal notranslate"><span class="pre">permutePath(path)</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#cookie">Cookie</a><ul>
<li><a class="reference internal" href="#cookie-parse-cookiestring-options"><code class="docutils literal notranslate"><span class="pre">Cookie.parse(cookieString[,</span> <span class="pre">options])</span></code></a></li>
<li><a class="reference internal" href="#properties">Properties</a></li>
<li><a class="reference internal" href="#new-cookie-properties"><code class="docutils literal notranslate"><span class="pre">new</span> <span class="pre">Cookie([properties])</span></code></a></li>
<li><a class="reference internal" href="#tostring"><code class="docutils literal notranslate"><span class="pre">.toString()</span></code></a></li>
<li><a class="reference internal" href="#cookiestring"><code class="docutils literal notranslate"><span class="pre">.cookieString()</span></code></a></li>
<li><a class="reference internal" href="#setexpires-string"><code class="docutils literal notranslate"><span class="pre">.setExpires(string)</span></code></a></li>
<li><a class="reference internal" href="#setmaxage-number"><code class="docutils literal notranslate"><span class="pre">.setMaxAge(number)</span></code></a></li>
<li><a class="reference internal" href="#expirydate-now-date-now"><code class="docutils literal notranslate"><span class="pre">.expiryDate([now=Date.now()])</span></code></a></li>
<li><a class="reference internal" href="#ttl-now-date-now"><code class="docutils literal notranslate"><span class="pre">.TTL([now=Date.now()])</span></code></a></li>
<li><a class="reference internal" href="#canonicalizeddomain"><code class="docutils literal notranslate"><span class="pre">.canonicalizedDomain()</span></code></a></li>
<li><a class="reference internal" href="#cdomain"><code class="docutils literal notranslate"><span class="pre">.cdomain()</span></code></a></li>
<li><a class="reference internal" href="#tojson"><code class="docutils literal notranslate"><span class="pre">.toJSON()</span></code></a></li>
<li><a class="reference internal" href="#cookie-fromjson-strorobj"><code class="docutils literal notranslate"><span class="pre">Cookie.fromJSON(strOrObj)</span></code></a></li>
<li><a class="reference internal" href="#clone"><code class="docutils literal notranslate"><span class="pre">.clone()</span></code></a></li>
<li><a class="reference internal" href="#validate"><code class="docutils literal notranslate"><span class="pre">.validate()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#cookiejar">CookieJar</a><ul>
<li><a class="reference internal" href="#cookiejar-store-options"><code class="docutils literal notranslate"><span class="pre">CookieJar([store][,</span> <span class="pre">options])</span></code></a></li>
<li><a class="reference internal" href="#setcookie-cookieorstring-currenturl-options-callback-err-cookie"><code class="docutils literal notranslate"><span class="pre">.setCookie(cookieOrString,</span> <span class="pre">currentUrl[,</span> <span class="pre">options][,</span> <span class="pre">callback(err,</span> <span class="pre">cookie)])</span></code></a></li>
<li><a class="reference internal" href="#setcookiesync-cookieorstring-currenturl-options"><code class="docutils literal notranslate"><span class="pre">.setCookieSync(cookieOrString,</span> <span class="pre">currentUrl[,</span> <span class="pre">options])</span></code></a></li>
<li><a class="reference internal" href="#getcookies-currenturl-options-callback-err-cookies"><code class="docutils literal notranslate"><span class="pre">.getCookies(currentUrl[,</span> <span class="pre">options][,</span> <span class="pre">callback(err,</span> <span class="pre">cookies)])</span></code></a></li>
<li><a class="reference internal" href="#getcookiessync-currenturl-options"><code class="docutils literal notranslate"><span class="pre">.getCookiesSync(currentUrl,</span> <span class="pre">[{options}])</span></code></a></li>
<li><a class="reference internal" href="#getcookiestring"><code class="docutils literal notranslate"><span class="pre">.getCookieString(...)</span></code></a></li>
<li><a class="reference internal" href="#getcookiestringsync"><code class="docutils literal notranslate"><span class="pre">.getCookieStringSync(...)</span></code></a></li>
<li><a class="reference internal" href="#getsetcookiestrings"><code class="docutils literal notranslate"><span class="pre">.getSetCookieStrings(...)</span></code></a></li>
<li><a class="reference internal" href="#getsetcookiestringssync"><code class="docutils literal notranslate"><span class="pre">.getSetCookieStringsSync(...)</span></code></a></li>
<li><a class="reference internal" href="#serialize-callback-err-serializedobject"><code class="docutils literal notranslate"><span class="pre">.serialize([callback(err,</span> <span class="pre">serializedObject)])</span></code></a></li>
<li><a class="reference internal" href="#serializesync"><code class="docutils literal notranslate"><span class="pre">.serializeSync()</span></code></a></li>
<li><a class="reference internal" href="#id1"><code class="docutils literal notranslate"><span class="pre">.toJSON()</span></code></a></li>
<li><a class="reference internal" href="#cookiejar-deserialize-serialized-store-callback-err-object"><code class="docutils literal notranslate"><span class="pre">CookieJar.deserialize(serialized[,</span> <span class="pre">store][,</span> <span class="pre">callback(err,</span> <span class="pre">object)])</span></code></a></li>
<li><a class="reference internal" href="#cookiejar-deserializesync-serialized-store"><code class="docutils literal notranslate"><span class="pre">CookieJar.deserializeSync(serialized[,</span> <span class="pre">store])</span></code></a></li>
<li><a class="reference internal" href="#cookiejar-fromjson-string"><code class="docutils literal notranslate"><span class="pre">CookieJar.fromJSON(string)</span></code></a></li>
<li><a class="reference internal" href="#clone-store-callback-err-cloned"><code class="docutils literal notranslate"><span class="pre">.clone([store][,</span> <span class="pre">callback(err,</span> <span class="pre">cloned))</span></code></a></li>
<li><a class="reference internal" href="#clonesync-store"><code class="docutils literal notranslate"><span class="pre">.cloneSync([store])</span></code></a></li>
<li><a class="reference internal" href="#removeallcookies-callback-err"><code class="docutils literal notranslate"><span class="pre">.removeAllCookies([callback(err)])</span></code></a></li>
<li><a class="reference internal" href="#removeallcookiessync"><code class="docutils literal notranslate"><span class="pre">.removeAllCookiesSync()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#store">Store</a></li>
<li><a class="reference internal" href="#store-api">Store API</a><ul>
<li><a class="reference internal" href="#store-findcookie-domain-path-key-callback-err-cookie"><code class="docutils literal notranslate"><span class="pre">store.findCookie(domain,</span> <span class="pre">path,</span> <span class="pre">key,</span> <span class="pre">callback(err,</span> <span class="pre">cookie))</span></code></a></li>
<li><a class="reference internal" href="#store-findcookies-domain-path-allowspecialusedomain-callback-err-cookies"><code class="docutils literal notranslate"><span class="pre">store.findCookies(domain,</span> <span class="pre">path,</span> <span class="pre">allowSpecialUseDomain,</span> <span class="pre">callback(err,</span> <span class="pre">cookies))</span></code></a></li>
<li><a class="reference internal" href="#store-putcookie-cookie-callback-err"><code class="docutils literal notranslate"><span class="pre">store.putCookie(cookie,</span> <span class="pre">callback(err))</span></code></a></li>
<li><a class="reference internal" href="#store-updatecookie-oldcookie-newcookie-callback-err"><code class="docutils literal notranslate"><span class="pre">store.updateCookie(oldCookie,</span> <span class="pre">newCookie,</span> <span class="pre">callback(err))</span></code></a></li>
<li><a class="reference internal" href="#store-removecookie-domain-path-key-callback-err"><code class="docutils literal notranslate"><span class="pre">store.removeCookie(domain,</span> <span class="pre">path,</span> <span class="pre">key,</span> <span class="pre">callback(err))</span></code></a></li>
<li><a class="reference internal" href="#store-removecookies-domain-path-callback-err"><code class="docutils literal notranslate"><span class="pre">store.removeCookies(domain,</span> <span class="pre">path,</span> <span class="pre">callback(err))</span></code></a></li>
<li><a class="reference internal" href="#store-removeallcookies-callback-err"><code class="docutils literal notranslate"><span class="pre">store.removeAllCookies(callback(err))</span></code></a></li>
<li><a class="reference internal" href="#store-getallcookies-callback-err-cookies"><code class="docutils literal notranslate"><span class="pre">store.getAllCookies(callback(err,</span> <span class="pre">cookies))</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#memorycookiestore">MemoryCookieStore</a></li>
<li><a class="reference internal" href="#community-cookie-stores">Community Cookie Stores</a></li>
</ul>
</li>
<li><a class="reference internal" href="#serialization-format">Serialization Format</a></li>
<li><a class="reference internal" href="#rfc-6265bis">RFC 6265bis</a><ul>
<li><a class="reference internal" href="#leave-secure-cookies-alone">Leave Secure Cookies Alone</a></li>
<li><a class="reference internal" href="#samesite-cookies">SameSite Cookies</a></li>
<li><a class="reference internal" href="#cookie-prefixes">Cookie Prefixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#copyright-and-license">Copyright and License</a></li>
</ul>

  </div><div id="ethical-ad-placement" data-ea-publisher="readthedocs"></div>
    </div>
  </aside>
  <div class="rside-overlay js-menu" role="button" aria-label="Close Table of Contents" aria-controls="rside" aria-expanded="false"></div>
  <main class="sy-main w-full max-sm:max-w-full print:pt-6">
    <div class="sy-breadcrumbs" role="navigation">
  <div class="sy-breadcrumbs-inner flex items-center">
    <div class="md:hidden mr-3">
      <button class="js-menu" aria-label="Menu" type="button" aria-controls="lside" aria-expanded="false">
        <i class="i-icon menu"></i>
      </button>
    </div>
    <ol class="flex-1" itemscope itemtype="https://schema.org/BreadcrumbList">
      
      
      <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <a itemprop="item" href="../../../"><span itemprop="name">Python Perú</span></a>
        <span>/</span>
        <meta itemprop="position" content="1" />
      </li>
      
      <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <strong itemprop="name">tough-cookie</strong>
        <meta itemprop="position" content="2" />
      </li>
      
      
    </ol>
    <div class="xl:hidden ml-1">
      <button class="js-menu" aria-label="Show table of contents" type="button" aria-controls="rside"
        aria-expanded="false">
        <i class="i-icon outdent"></i>
      </button>
    </div>
  </div>
</div>
    <div class="flex flex-col break-words justify-between">
      <div class="min-w-0 max-w-6xl px-6 pb-6 pt-8 xl:px-12">
        <article class="yue" role="main">
          <section class="tex2jax_ignore mathjax_ignore" id="tough-cookie">
<h1>tough-cookie<a class="headerlink" href="#tough-cookie" title="Link to this heading">¶</a></h1>
<p><a class="reference external" href="https://tools.ietf.org/html/rfc6265">RFC 6265</a> Cookies and CookieJar for Node.js</p>
<p><a class="reference external" href="https://nodei.co/npm/tough-cookie/"><img alt="npm package" src="https://nodei.co/npm/tough-cookie.png?downloads=true&amp;downloadRank=true&amp;stars=true" /></a></p>
<p><a class="reference external" href="https://travis-ci.org/salesforce/tough-cookie"><img alt="Build Status" src="https://travis-ci.org/salesforce/tough-cookie.svg?branch=master" /></a></p>
<section id="synopsis">
<h2>Synopsis<a class="headerlink" href="#synopsis" title="Link to this heading">¶</a></h2>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span id="1-1"><span class="kd">var</span><span class="w"> </span><span class="nx">tough</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;tough-cookie&quot;</span><span class="p">);</span>
</span><span id="1-2"><span class="kd">var</span><span class="w"> </span><span class="nx">Cookie</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">tough</span><span class="p">.</span><span class="nx">Cookie</span><span class="p">;</span>
</span><span id="1-3"><span class="kd">var</span><span class="w"> </span><span class="nx">cookie</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Cookie</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">header</span><span class="p">);</span>
</span><span id="1-4"><span class="nx">cookie</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;somethingdifferent&quot;</span><span class="p">;</span>
</span><span id="1-5"><span class="nx">header</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">cookie</span><span class="p">.</span><span class="nx">toString</span><span class="p">();</span>
</span><span id="1-6"><span class="kd">var</span><span class="w"> </span><span class="nx">cookiejar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">tough</span><span class="p">.</span><span class="nx">CookieJar</span><span class="p">();</span>
</span><span id="1-7">
</span><span id="1-8"><span class="c1">// Asynchronous!</span>
</span><span id="1-9"><span class="kd">var</span><span class="w"> </span><span class="nx">cookie</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">cookiejar</span><span class="p">.</span><span class="nx">setCookie</span><span class="p">(</span>
</span><span id="1-10"><span class="w">  </span><span class="nx">cookie</span><span class="p">,</span>
</span><span id="1-11"><span class="w">  </span><span class="s2">&quot;https://currentdomain.example.com/path&quot;</span>
</span><span id="1-12"><span class="p">);</span>
</span><span id="1-13"><span class="kd">var</span><span class="w"> </span><span class="nx">cookies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">cookiejar</span><span class="p">.</span><span class="nx">getCookies</span><span class="p">(</span><span class="s2">&quot;https://example.com/otherpath&quot;</span><span class="p">);</span>
</span><span id="1-14">
</span><span id="1-15"><span class="c1">// Or with callbacks!</span>
</span><span id="1-16"><span class="nx">cookiejar</span><span class="p">.</span><span class="nx">setCookie</span><span class="p">(</span>
</span><span id="1-17"><span class="w">  </span><span class="nx">cookie</span><span class="p">,</span>
</span><span id="1-18"><span class="w">  </span><span class="s2">&quot;https://currentdomain.example.com/path&quot;</span><span class="p">,</span>
</span><span id="1-19"><span class="w">  </span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">,</span><span class="w"> </span><span class="nx">cookie</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="1-20"><span class="w">    </span><span class="cm">/* ... */</span>
</span><span id="1-21"><span class="w">  </span><span class="p">}</span>
</span><span id="1-22"><span class="p">);</span>
</span><span id="1-23"><span class="nx">cookiejar</span><span class="p">.</span><span class="nx">getCookies</span><span class="p">(</span><span class="s2">&quot;http://example.com/otherpath&quot;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">,</span><span class="w"> </span><span class="nx">cookies</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="1-24"><span class="w">  </span><span class="cm">/* ... */</span>
</span><span id="1-25"><span class="p">});</span>
</span></pre></div>
</div>
<p>Why the name? NPM modules <code class="docutils literal notranslate"><span class="pre">cookie</span></code>, <code class="docutils literal notranslate"><span class="pre">cookies</span></code> and <code class="docutils literal notranslate"><span class="pre">cookiejar</span></code> were already taken.</p>
</section>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Link to this heading">¶</a></h2>
<p>It’s <em>so</em> easy! Install with <code class="docutils literal notranslate"><span class="pre">npm</span></code> or your preferred package manager.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span id="1-1">npm<span class="w"> </span>install<span class="w"> </span>tough-cookie
</span></pre></div>
</div>
</section>
<section id="node-js-version-support">
<h2>Node.js Version Support<a class="headerlink" href="#node-js-version-support" title="Link to this heading">¶</a></h2>
<p>We follow the <a class="reference external" href="https://github.com/nodejs/Release#release-schedule">node.js release schedule</a> and support all versions that are in Active LTS or Maintenance. We will always do a major release when dropping support for older versions of node, and we will do so in consultation with our community.</p>
</section>
<section id="api">
<h2>API<a class="headerlink" href="#api" title="Link to this heading">¶</a></h2>
<section id="tough">
<h3>tough<a class="headerlink" href="#tough" title="Link to this heading">¶</a></h3>
<p>The top-level exports from <code class="docutils literal notranslate"><span class="pre">require('tough-cookie')</span></code> can all be used as pure functions and don’t need to be bound.</p>
<section id="parsedate-string">
<h4><code class="docutils literal notranslate"><span class="pre">parseDate(string)</span></code><a class="headerlink" href="#parsedate-string" title="Link to this heading">¶</a></h4>
<p>Parse a cookie date string into a <code class="docutils literal notranslate"><span class="pre">Date</span></code>. Parses according to <a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc6265#section-5.1.1">RFC 6265 Section 5.1.1</a>, not <code class="docutils literal notranslate"><span class="pre">Date.parse()</span></code>.</p>
</section>
<section id="formatdate-date">
<h4><code class="docutils literal notranslate"><span class="pre">formatDate(date)</span></code><a class="headerlink" href="#formatdate-date" title="Link to this heading">¶</a></h4>
<p>Format a <code class="docutils literal notranslate"><span class="pre">Date</span></code> into an <a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc822#section-5">RFC 822</a> string (the RFC 6265 recommended format).</p>
</section>
<section id="canonicaldomain-str">
<h4><code class="docutils literal notranslate"><span class="pre">canonicalDomain(str)</span></code><a class="headerlink" href="#canonicaldomain-str" title="Link to this heading">¶</a></h4>
<p>Transforms a domain name into a canonical domain name. The canonical domain name is a domain name that has been trimmed, lowercased, stripped of leading dot, and optionally punycode-encoded (<a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc6265#section-5.1.2">Section 5.1.2 of RFC 6265</a>). For the most part, this function is idempotent (calling the function with the output from a previous call returns the same output).</p>
</section>
<section id="domainmatch-str-domstr-canonicalize-true">
<h4><code class="docutils literal notranslate"><span class="pre">domainMatch(str,</span> <span class="pre">domStr[,</span> <span class="pre">canonicalize=true])</span></code><a class="headerlink" href="#domainmatch-str-domstr-canonicalize-true" title="Link to this heading">¶</a></h4>
<p>Answers “does this real domain match the domain in a cookie?”. The <code class="docutils literal notranslate"><span class="pre">str</span></code> is the “current” domain name and the <code class="docutils literal notranslate"><span class="pre">domStr</span></code> is the “cookie” domain name. Matches according to <a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc6265#section-5.1.3">RFC 6265 Section 5.1.3</a>, but it helps to think of it as a “suffix match”.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">canonicalize</span></code> parameter toggles whether the domain parameters get normalized with <code class="docutils literal notranslate"><span class="pre">canonicalDomain</span></code> or not.</p>
</section>
<section id="defaultpath-path">
<h4><code class="docutils literal notranslate"><span class="pre">defaultPath(path)</span></code><a class="headerlink" href="#defaultpath-path" title="Link to this heading">¶</a></h4>
<p>Given a current request/response path, gives the path appropriate for storing in a cookie. This is basically the “directory” of a “file” in the path, but is specified by <a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc6265#section-5.1.4">Section 5.1.4 of the RFC</a>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">path</span></code> parameter MUST be <em>only</em> the pathname part of a URI (excluding the hostname, query, fragment, and so on). This is the <code class="docutils literal notranslate"><span class="pre">.pathname</span></code> property of node’s <code class="docutils literal notranslate"><span class="pre">uri.parse()</span></code> output.</p>
</section>
<section id="pathmatch-reqpath-cookiepath">
<h4><code class="docutils literal notranslate"><span class="pre">pathMatch(reqPath,</span> <span class="pre">cookiePath)</span></code><a class="headerlink" href="#pathmatch-reqpath-cookiepath" title="Link to this heading">¶</a></h4>
<p>Answers “does the request-path path-match a given cookie-path?” as per <a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc6265#section-5.1.4">RFC 6265 Section 5.1.4</a>. Returns a boolean.</p>
<p>This is essentially a prefix-match where <code class="docutils literal notranslate"><span class="pre">cookiePath</span></code> is a prefix of <code class="docutils literal notranslate"><span class="pre">reqPath</span></code>.</p>
</section>
<section id="parse-cookiestring-options">
<h4><code class="docutils literal notranslate"><span class="pre">parse(cookieString[,</span> <span class="pre">options])</span></code><a class="headerlink" href="#parse-cookiestring-options" title="Link to this heading">¶</a></h4>
<p>Alias for <a class="reference internal" href="#cookieparsecookiestring-options"><span class="xref myst"><code class="docutils literal notranslate"><span class="pre">Cookie.parse(cookieString[,</span> <span class="pre">options])</span></code></span></a>.</p>
</section>
<section id="fromjson-string">
<h4><code class="docutils literal notranslate"><span class="pre">fromJSON(string)</span></code><a class="headerlink" href="#fromjson-string" title="Link to this heading">¶</a></h4>
<p>Alias for <a class="reference internal" href="#cookiefromjsonstrorobj"><span class="xref myst"><code class="docutils literal notranslate"><span class="pre">Cookie.fromJSON(string)</span></code></span></a>.</p>
</section>
<section id="getpublicsuffix-hostname">
<h4><code class="docutils literal notranslate"><span class="pre">getPublicSuffix(hostname)</span></code><a class="headerlink" href="#getpublicsuffix-hostname" title="Link to this heading">¶</a></h4>
<p>Returns the public suffix of this hostname. The public suffix is the shortest domain name upon which a cookie can be set. Returns <code class="docutils literal notranslate"><span class="pre">null</span></code> if the hostname cannot have cookies set for it.</p>
<p>For example: <code class="docutils literal notranslate"><span class="pre">www.example.com</span></code> and <code class="docutils literal notranslate"><span class="pre">www.subdomain.example.com</span></code> both have public suffix <code class="docutils literal notranslate"><span class="pre">example.com</span></code>.</p>
<p>For further information, see the <a class="reference external" href="http://publicsuffix.org/">Public Suffix List</a>. This module derives its list from that site. This call is a wrapper around <a class="reference external" href="https://www.npmjs.com/package/psl"><code class="docutils literal notranslate"><span class="pre">psl</span></code></a>’s <a class="reference external" href="https://www.npmjs.com/package/psl##pslgetdomain"><code class="docutils literal notranslate"><span class="pre">get</span></code> method</a>.</p>
</section>
<section id="cookiecompare-a-b">
<h4><code class="docutils literal notranslate"><span class="pre">cookieCompare(a,</span> <span class="pre">b)</span></code><a class="headerlink" href="#cookiecompare-a-b" title="Link to this heading">¶</a></h4>
<p>For use with <code class="docutils literal notranslate"><span class="pre">.sort()</span></code>, sorts a list of cookies into the recommended order given in step 2 of (<a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc6265#section-5.4">RFC 6265 Section 5.4</a>). The sort algorithm is, in order of precedence:</p>
<ul class="simple">
<li><p>Longest <code class="docutils literal notranslate"><span class="pre">.path</span></code></p></li>
<li><p>oldest <code class="docutils literal notranslate"><span class="pre">.creation</span></code> (which has a 1-ms precision, same as <code class="docutils literal notranslate"><span class="pre">Date</span></code>)</p></li>
<li><p>lowest <code class="docutils literal notranslate"><span class="pre">.creationIndex</span></code> (to get beyond the 1-ms precision)</p></li>
</ul>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span id="1-1"><span class="kd">var</span><span class="w"> </span><span class="nx">cookies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
</span><span id="1-2"><span class="w">  </span><span class="cm">/* unsorted array of Cookie objects */</span>
</span><span id="1-3"><span class="p">];</span>
</span><span id="1-4"><span class="nx">cookies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">cookies</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="nx">cookieCompare</span><span class="p">);</span>
</span></pre></div>
</div>
<blockquote>
<div><p><strong>Note</strong>: Since the JavaScript <code class="docutils literal notranslate"><span class="pre">Date</span></code> is limited to a 1-ms precision, cookies within the same millisecond are entirely possible. This is especially true when using the <code class="docutils literal notranslate"><span class="pre">now</span></code> option to <code class="docutils literal notranslate"><span class="pre">.setCookie()</span></code>. The <code class="docutils literal notranslate"><span class="pre">.creationIndex</span></code> property is a per-process global counter, assigned during construction with <code class="docutils literal notranslate"><span class="pre">new</span> <span class="pre">Cookie()</span></code>, which preserves the spirit of the RFC sorting: older cookies go first. This works great for <code class="docutils literal notranslate"><span class="pre">MemoryCookieStore</span></code> since <code class="docutils literal notranslate"><span class="pre">Set-Cookie</span></code> headers are parsed in order, but is not so great for distributed systems. Sophisticated <code class="docutils literal notranslate"><span class="pre">Store</span></code>s may wish to set this to some other <em>logical clock</em> so that if cookies A and B are created in the same millisecond, but cookie A is created before cookie B, then <code class="docutils literal notranslate"><span class="pre">A.creationIndex</span> <span class="pre">&lt;</span> <span class="pre">B.creationIndex</span></code>. If you want to alter the global counter, which you probably <em>shouldn’t</em> do, it’s stored in <code class="docutils literal notranslate"><span class="pre">Cookie.cookiesCreated</span></code>.</p>
</div></blockquote>
</section>
<section id="permutedomain-domain">
<h4><code class="docutils literal notranslate"><span class="pre">permuteDomain(domain)</span></code><a class="headerlink" href="#permutedomain-domain" title="Link to this heading">¶</a></h4>
<p>Generates a list of all possible domains that <code class="docutils literal notranslate"><span class="pre">domainMatch()</span></code> the parameter. Can be handy for implementing cookie stores.</p>
</section>
<section id="permutepath-path">
<h4><code class="docutils literal notranslate"><span class="pre">permutePath(path)</span></code><a class="headerlink" href="#permutepath-path" title="Link to this heading">¶</a></h4>
<p>Generates a list of all possible paths that <code class="docutils literal notranslate"><span class="pre">pathMatch()</span></code> the parameter. Can be handy for implementing cookie stores.</p>
</section>
</section>
<section id="cookie">
<h3>Cookie<a class="headerlink" href="#cookie" title="Link to this heading">¶</a></h3>
<p>Exported via <code class="docutils literal notranslate"><span class="pre">tough.Cookie</span></code>.</p>
<section id="cookie-parse-cookiestring-options">
<h4><code class="docutils literal notranslate"><span class="pre">Cookie.parse(cookieString[,</span> <span class="pre">options])</span></code><a class="headerlink" href="#cookie-parse-cookiestring-options" title="Link to this heading">¶</a></h4>
<p>Parses a single Cookie or Set-Cookie HTTP header into a <code class="docutils literal notranslate"><span class="pre">Cookie</span></code> object. Returns <code class="docutils literal notranslate"><span class="pre">undefined</span></code> if the string can’t be parsed.</p>
<p>The options parameter is not required and currently has only one property:</p>
<ul class="simple">
<li><p><em>loose</em> - boolean - if <code class="docutils literal notranslate"><span class="pre">true</span></code> enable parsing of keyless cookies like <code class="docutils literal notranslate"><span class="pre">=abc</span></code> and <code class="docutils literal notranslate"><span class="pre">=</span></code>, which are not RFC-compliant.</p></li>
</ul>
<p>If options is not an object it is ignored, which means it can be used with <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map"><code class="docutils literal notranslate"><span class="pre">Array#map</span></code></a>.</p>
<p>To process the Set-Cookie header(s) on a node HTTP/HTTPS response:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span id="1-1"><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">headers</span><span class="p">[</span><span class="s2">&quot;set-cookie&quot;</span><span class="p">]))</span>
</span><span id="1-2"><span class="w">  </span><span class="nx">cookies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">res</span><span class="p">.</span><span class="nx">headers</span><span class="p">[</span><span class="s2">&quot;set-cookie&quot;</span><span class="p">].</span><span class="nx">map</span><span class="p">(</span><span class="nx">Cookie</span><span class="p">.</span><span class="nx">parse</span><span class="p">);</span>
</span><span id="1-3"><span class="k">else</span><span class="w"> </span><span class="nx">cookies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="nx">Cookie</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">headers</span><span class="p">[</span><span class="s2">&quot;set-cookie&quot;</span><span class="p">])];</span>
</span></pre></div>
</div>
<p><em>Note:</em> In version 2.3.3, tough-cookie limited the number of spaces before the <code class="docutils literal notranslate"><span class="pre">=</span></code> to 256 characters. This limitation was removed in version 2.3.4.
For more details, see <a class="reference external" href="https://github.com/salesforce/tough-cookie/issues/92">issue #92</a>.</p>
</section>
<section id="properties">
<h4>Properties<a class="headerlink" href="#properties" title="Link to this heading">¶</a></h4>
<p>Cookie object properties:</p>
<ul class="simple">
<li><p><em>key</em> - string - the name or key of the cookie (default <code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code>)</p></li>
<li><p><em>value</em> - string - the value of the cookie (default <code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code>)</p></li>
<li><p><em>expires</em> - <code class="docutils literal notranslate"><span class="pre">Date</span></code> - if set, the <code class="docutils literal notranslate"><span class="pre">Expires=</span></code> attribute of the cookie (defaults to the string <code class="docutils literal notranslate"><span class="pre">&quot;Infinity&quot;</span></code>). See <code class="docutils literal notranslate"><span class="pre">setExpires()</span></code></p></li>
<li><p><em>maxAge</em> - seconds - if set, the <code class="docutils literal notranslate"><span class="pre">Max-Age=</span></code> attribute <em>in seconds</em> of the cookie. Can also be set to strings <code class="docutils literal notranslate"><span class="pre">&quot;Infinity&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;-Infinity&quot;</span></code> for non-expiry and immediate-expiry, respectively. See <code class="docutils literal notranslate"><span class="pre">setMaxAge()</span></code></p></li>
<li><p><em>domain</em> - string - the <code class="docutils literal notranslate"><span class="pre">Domain=</span></code> attribute of the cookie</p></li>
<li><p><em>path</em> - string - the <code class="docutils literal notranslate"><span class="pre">Path=</span></code> of the cookie</p></li>
<li><p><em>secure</em> - boolean - the <code class="docutils literal notranslate"><span class="pre">Secure</span></code> cookie flag</p></li>
<li><p><em>httpOnly</em> - boolean - the <code class="docutils literal notranslate"><span class="pre">HttpOnly</span></code> cookie flag</p></li>
<li><p><em>sameSite</em> - string - the <code class="docutils literal notranslate"><span class="pre">SameSite</span></code> cookie attribute (from <a class="reference internal" href="#rfc-6265bis"><span class="xref myst">RFC 6265bis</span></a>); must be one of <code class="docutils literal notranslate"><span class="pre">none</span></code>, <code class="docutils literal notranslate"><span class="pre">lax</span></code>, or <code class="docutils literal notranslate"><span class="pre">strict</span></code></p></li>
<li><p><em>extensions</em> - <code class="docutils literal notranslate"><span class="pre">Array</span></code> - any unrecognized cookie attributes as strings (even if equal-signs inside)</p></li>
<li><p><em>creation</em> - <code class="docutils literal notranslate"><span class="pre">Date</span></code> - when this cookie was constructed</p></li>
<li><p><em>creationIndex</em> - number - set at construction, used to provide greater sort precision (see <code class="docutils literal notranslate"><span class="pre">cookieCompare(a,b)</span></code> for a full explanation)</p></li>
</ul>
<p>After a cookie has been passed through <code class="docutils literal notranslate"><span class="pre">CookieJar.setCookie()</span></code> it has the following additional attributes:</p>
<ul class="simple">
<li><p><em>hostOnly</em> - boolean - is this a host-only cookie (that is, no Domain field was set, but was instead implied).</p></li>
<li><p><em>pathIsDefault</em> - boolean - if true, there was no Path field on the cookie and <code class="docutils literal notranslate"><span class="pre">defaultPath()</span></code> was used to derive one.</p></li>
<li><p><em>creation</em> - <code class="docutils literal notranslate"><span class="pre">Date</span></code> - <strong>modified</strong> from construction to when the cookie was added to the jar.</p></li>
<li><p><em>lastAccessed</em> - <code class="docutils literal notranslate"><span class="pre">Date</span></code> - last time the cookie got accessed. Affects cookie cleaning after it is implemented. Using <code class="docutils literal notranslate"><span class="pre">cookiejar.getCookies(...)</span></code> updates this attribute.</p></li>
</ul>
</section>
<section id="new-cookie-properties">
<h4><code class="docutils literal notranslate"><span class="pre">new</span> <span class="pre">Cookie([properties])</span></code><a class="headerlink" href="#new-cookie-properties" title="Link to this heading">¶</a></h4>
<p>Receives an options object that can contain any of the above Cookie properties. Uses the default for unspecified properties.</p>
</section>
<section id="tostring">
<h4><code class="docutils literal notranslate"><span class="pre">.toString()</span></code><a class="headerlink" href="#tostring" title="Link to this heading">¶</a></h4>
<p>Encodes to a Set-Cookie header value. The Expires cookie field is set using <code class="docutils literal notranslate"><span class="pre">formatDate()</span></code>, but is omitted entirely if <code class="docutils literal notranslate"><span class="pre">.expires</span></code> is <code class="docutils literal notranslate"><span class="pre">Infinity</span></code>.</p>
</section>
<section id="cookiestring">
<h4><code class="docutils literal notranslate"><span class="pre">.cookieString()</span></code><a class="headerlink" href="#cookiestring" title="Link to this heading">¶</a></h4>
<p>Encodes to a Cookie header value (specifically, the <code class="docutils literal notranslate"><span class="pre">.key</span></code> and <code class="docutils literal notranslate"><span class="pre">.value</span></code> properties joined with <code class="docutils literal notranslate"><span class="pre">&quot;=&quot;</span></code>).</p>
</section>
<section id="setexpires-string">
<h4><code class="docutils literal notranslate"><span class="pre">.setExpires(string)</span></code><a class="headerlink" href="#setexpires-string" title="Link to this heading">¶</a></h4>
<p>Sets the expiry based on a date-string passed through <code class="docutils literal notranslate"><span class="pre">parseDate()</span></code>. If parseDate returns <code class="docutils literal notranslate"><span class="pre">null</span></code> (that is, can’t parse this date string), <code class="docutils literal notranslate"><span class="pre">.expires</span></code> is set to <code class="docutils literal notranslate"><span class="pre">&quot;Infinity&quot;</span></code> (a string).</p>
</section>
<section id="setmaxage-number">
<h4><code class="docutils literal notranslate"><span class="pre">.setMaxAge(number)</span></code><a class="headerlink" href="#setmaxage-number" title="Link to this heading">¶</a></h4>
<p>Sets the maxAge in seconds. Coerces <code class="docutils literal notranslate"><span class="pre">-Infinity</span></code> to <code class="docutils literal notranslate"><span class="pre">&quot;-Infinity&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">Infinity</span></code> to <code class="docutils literal notranslate"><span class="pre">&quot;Infinity&quot;</span></code> so it correctly serializes to JSON.</p>
</section>
<section id="expirydate-now-date-now">
<h4><code class="docutils literal notranslate"><span class="pre">.expiryDate([now=Date.now()])</span></code><a class="headerlink" href="#expirydate-now-date-now" title="Link to this heading">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">expiryTime()</span></code> computes the absolute unix-epoch milliseconds that this cookie expires. <code class="docutils literal notranslate"><span class="pre">expiryDate()</span></code> works similarly, except it returns a <code class="docutils literal notranslate"><span class="pre">Date</span></code> object. Note that in both cases the <code class="docutils literal notranslate"><span class="pre">now</span></code> parameter should be milliseconds.</p>
<p>Max-Age takes precedence over Expires (as per the RFC). The <code class="docutils literal notranslate"><span class="pre">.creation</span></code> attribute – or, by default, the <code class="docutils literal notranslate"><span class="pre">now</span></code> parameter – is used to offset the <code class="docutils literal notranslate"><span class="pre">.maxAge</span></code> attribute.</p>
<p>If Expires (<code class="docutils literal notranslate"><span class="pre">.expires</span></code>) is set, that’s returned.</p>
<p>Otherwise, <code class="docutils literal notranslate"><span class="pre">expiryTime()</span></code> returns <code class="docutils literal notranslate"><span class="pre">Infinity</span></code> and <code class="docutils literal notranslate"><span class="pre">expiryDate()</span></code> returns a <code class="docutils literal notranslate"><span class="pre">Date</span></code> object for “Tue, 19 Jan 2038 03:14:07 GMT” (latest date that can be expressed by a 32-bit <code class="docutils literal notranslate"><span class="pre">time_t</span></code>; the common limit for most user-agents).</p>
</section>
<section id="ttl-now-date-now">
<h4><code class="docutils literal notranslate"><span class="pre">.TTL([now=Date.now()])</span></code><a class="headerlink" href="#ttl-now-date-now" title="Link to this heading">¶</a></h4>
<p>Computes the TTL relative to <code class="docutils literal notranslate"><span class="pre">now</span></code> (milliseconds). The same precedence rules as for <code class="docutils literal notranslate"><span class="pre">expiryTime</span></code>/<code class="docutils literal notranslate"><span class="pre">expiryDate</span></code> apply.</p>
<p><code class="docutils literal notranslate"><span class="pre">Infinity</span></code> is returned for cookies without an explicit expiry and <code class="docutils literal notranslate"><span class="pre">0</span></code> is returned if the cookie is expired. Otherwise a time-to-live in milliseconds is returned.</p>
</section>
<section id="canonicalizeddomain">
<h4><code class="docutils literal notranslate"><span class="pre">.canonicalizedDomain()</span></code><a class="headerlink" href="#canonicalizeddomain" title="Link to this heading">¶</a></h4>
</section>
<section id="cdomain">
<h4><code class="docutils literal notranslate"><span class="pre">.cdomain()</span></code><a class="headerlink" href="#cdomain" title="Link to this heading">¶</a></h4>
<p>Returns the canonicalized <code class="docutils literal notranslate"><span class="pre">.domain</span></code> field. This is lower-cased and punycode (<a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc3490">RFC 3490</a>) encoded if the domain has any non-ASCII characters.</p>
</section>
<section id="tojson">
<h4><code class="docutils literal notranslate"><span class="pre">.toJSON()</span></code><a class="headerlink" href="#tojson" title="Link to this heading">¶</a></h4>
<p>For convenience in using <code class="docutils literal notranslate"><span class="pre">JSON.serialize(cookie)</span></code>. Returns a plain-old <code class="docutils literal notranslate"><span class="pre">Object</span></code> that can be JSON-serialized.</p>
<p>Any <code class="docutils literal notranslate"><span class="pre">Date</span></code> properties (such as <code class="docutils literal notranslate"><span class="pre">.expires</span></code>, <code class="docutils literal notranslate"><span class="pre">.creation</span></code>, and <code class="docutils literal notranslate"><span class="pre">.lastAccessed</span></code>) are exported in ISO format (<code class="docutils literal notranslate"><span class="pre">.toISOString()</span></code>).</p>
<blockquote>
<div><p><strong>NOTE</strong>: Custom <code class="docutils literal notranslate"><span class="pre">Cookie</span></code> properties are discarded. In tough-cookie 1.x, since there was no <code class="docutils literal notranslate"><span class="pre">.toJSON</span></code> method explicitly defined, all enumerable properties were captured. If you want a property to be serialized, add the property name to the <code class="docutils literal notranslate"><span class="pre">Cookie.serializableProperties</span></code> Array.</p>
</div></blockquote>
</section>
<section id="cookie-fromjson-strorobj">
<h4><code class="docutils literal notranslate"><span class="pre">Cookie.fromJSON(strOrObj)</span></code><a class="headerlink" href="#cookie-fromjson-strorobj" title="Link to this heading">¶</a></h4>
<p>Does the reverse of <code class="docutils literal notranslate"><span class="pre">cookie.toJSON()</span></code>. If passed a string, will <code class="docutils literal notranslate"><span class="pre">JSON.parse()</span></code> that first.</p>
<p>Any <code class="docutils literal notranslate"><span class="pre">Date</span></code> properties (such as <code class="docutils literal notranslate"><span class="pre">.expires</span></code>, <code class="docutils literal notranslate"><span class="pre">.creation</span></code>, and <code class="docutils literal notranslate"><span class="pre">.lastAccessed</span></code>) are parsed via <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse"><code class="docutils literal notranslate"><span class="pre">Date.parse</span></code></a>, not tough-cookie’s <code class="docutils literal notranslate"><span class="pre">parseDate</span></code>, since ISO timestamps are being handled at this layer.</p>
<p>Returns <code class="docutils literal notranslate"><span class="pre">null</span></code> upon a JSON parsing error.</p>
</section>
<section id="clone">
<h4><code class="docutils literal notranslate"><span class="pre">.clone()</span></code><a class="headerlink" href="#clone" title="Link to this heading">¶</a></h4>
<p>Does a deep clone of this cookie, implemented exactly as <code class="docutils literal notranslate"><span class="pre">Cookie.fromJSON(cookie.toJSON())</span></code>.</p>
</section>
<section id="validate">
<h4><code class="docutils literal notranslate"><span class="pre">.validate()</span></code><a class="headerlink" href="#validate" title="Link to this heading">¶</a></h4>
<p>Status: <em>IN PROGRESS</em>. Works for a few things, but is by no means comprehensive.</p>
<p>Validates cookie attributes for semantic correctness. Useful for “lint” checking any Set-Cookie headers you generate. For now, it returns a boolean, but eventually could return a reason string. Future-proof with this construct:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span id="1-1"><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">cookie</span><span class="p">.</span><span class="nx">validate</span><span class="p">()</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="1-2"><span class="w">  </span><span class="c1">// it&#39;s tasty</span>
</span><span id="1-3"><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="1-4"><span class="w">  </span><span class="c1">// yuck!</span>
</span><span id="1-5"><span class="p">}</span>
</span></pre></div>
</div>
</section>
</section>
<section id="cookiejar">
<h3>CookieJar<a class="headerlink" href="#cookiejar" title="Link to this heading">¶</a></h3>
<p>Exported via <code class="docutils literal notranslate"><span class="pre">tough.CookieJar</span></code>.</p>
<section id="cookiejar-store-options">
<h4><code class="docutils literal notranslate"><span class="pre">CookieJar([store][,</span> <span class="pre">options])</span></code><a class="headerlink" href="#cookiejar-store-options" title="Link to this heading">¶</a></h4>
<p>Simply use <code class="docutils literal notranslate"><span class="pre">new</span> <span class="pre">CookieJar()</span></code>. If a custom store is not passed to the constructor, a <a class="reference internal" href="#memorycookiestore"><span class="xref myst"><code class="docutils literal notranslate"><span class="pre">MemoryCookieStore</span></code></span></a> is created and used.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">options</span></code> object can be omitted and can have the following properties:</p>
<ul class="simple">
<li><p><em>rejectPublicSuffixes</em> - boolean - default <code class="docutils literal notranslate"><span class="pre">true</span></code> - reject cookies with domains like “com” and “<a class="reference external" href="http://co.uk">co.uk</a>”</p></li>
<li><p><em>looseMode</em> - boolean - default <code class="docutils literal notranslate"><span class="pre">false</span></code> - accept malformed cookies like <code class="docutils literal notranslate"><span class="pre">bar</span></code> and <code class="docutils literal notranslate"><span class="pre">=bar</span></code>, which have an implied empty name.</p></li>
<li><p><em>prefixSecurity</em> - string - default <code class="docutils literal notranslate"><span class="pre">silent</span></code> - set to <code class="docutils literal notranslate"><span class="pre">'unsafe-disabled'</span></code>, <code class="docutils literal notranslate"><span class="pre">'silent'</span></code>, or <code class="docutils literal notranslate"><span class="pre">'strict'</span></code>. See <a class="reference internal" href="#cookie-prefixes"><span class="xref myst">Cookie Prefixes</span></a> below.</p></li>
<li><p><em>allowSpecialUseDomain</em> - boolean - default <code class="docutils literal notranslate"><span class="pre">true</span></code> - accepts special-use domain suffixes, such as <code class="docutils literal notranslate"><span class="pre">local</span></code>. Useful for testing purposes.
This is not in the standard, but is used sometimes on the web and is accepted by most browsers.</p></li>
</ul>
</section>
<section id="setcookie-cookieorstring-currenturl-options-callback-err-cookie">
<h4><code class="docutils literal notranslate"><span class="pre">.setCookie(cookieOrString,</span> <span class="pre">currentUrl[,</span> <span class="pre">options][,</span> <span class="pre">callback(err,</span> <span class="pre">cookie)])</span></code><a class="headerlink" href="#setcookie-cookieorstring-currenturl-options-callback-err-cookie" title="Link to this heading">¶</a></h4>
<p>Attempt to set the cookie in the cookie jar. The cookie has updated <code class="docutils literal notranslate"><span class="pre">.creation</span></code>, <code class="docutils literal notranslate"><span class="pre">.lastAccessed</span></code> and <code class="docutils literal notranslate"><span class="pre">.hostOnly</span></code> properties. And returns a promise if a callback is not provided.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">options</span></code> object can be omitted and can have the following properties:</p>
<ul class="simple">
<li><p><em>http</em> - boolean - default <code class="docutils literal notranslate"><span class="pre">true</span></code> - indicates if this is an HTTP or non-HTTP API. Affects <code class="docutils literal notranslate"><span class="pre">HttpOnly</span></code> cookies.</p></li>
<li><p><em>secure</em> - boolean - autodetect from URL - indicates if this is a “Secure” API. If the currentUrl starts with <code class="docutils literal notranslate"><span class="pre">https:</span></code> or <code class="docutils literal notranslate"><span class="pre">wss:</span></code> this defaults to <code class="docutils literal notranslate"><span class="pre">true</span></code>, otherwise <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
<li><p><em>now</em> - Date - default <code class="docutils literal notranslate"><span class="pre">new</span> <span class="pre">Date()</span></code> - what to use for the creation or access time of cookies.</p></li>
<li><p><em>ignoreError</em> - boolean - default <code class="docutils literal notranslate"><span class="pre">false</span></code> - silently ignore things like parse errors and invalid domains. <code class="docutils literal notranslate"><span class="pre">Store</span></code> errors aren’t ignored by this option.</p></li>
<li><p><em>sameSiteContext</em> - string - default unset - set to <code class="docutils literal notranslate"><span class="pre">'none'</span></code>, <code class="docutils literal notranslate"><span class="pre">'lax'</span></code>, or <code class="docutils literal notranslate"><span class="pre">'strict'</span></code> See <a class="reference internal" href="#samesite-cookies"><span class="xref myst">SameSite Cookies</span></a> below.</p></li>
</ul>
<p>As per the RFC, the <code class="docutils literal notranslate"><span class="pre">.hostOnly</span></code> property is set if there was no “Domain=” parameter in the cookie string (or <code class="docutils literal notranslate"><span class="pre">.domain</span></code> was null on the Cookie object). The <code class="docutils literal notranslate"><span class="pre">.domain</span></code> property is set to the fully-qualified hostname of <code class="docutils literal notranslate"><span class="pre">currentUrl</span></code> in this case. Matching this cookie requires an exact hostname match (not a <code class="docutils literal notranslate"><span class="pre">domainMatch</span></code> as per usual).</p>
</section>
<section id="setcookiesync-cookieorstring-currenturl-options">
<h4><code class="docutils literal notranslate"><span class="pre">.setCookieSync(cookieOrString,</span> <span class="pre">currentUrl[,</span> <span class="pre">options])</span></code><a class="headerlink" href="#setcookiesync-cookieorstring-currenturl-options" title="Link to this heading">¶</a></h4>
<p>Synchronous version of <a class="reference internal" href="#setcookiecookieorstring-currenturl-options-callbackerr-cookie"><span class="xref myst"><code class="docutils literal notranslate"><span class="pre">setCookie</span></code></span></a>; only works with synchronous stores (that is, the default <code class="docutils literal notranslate"><span class="pre">MemoryCookieStore</span></code>).</p>
</section>
<section id="getcookies-currenturl-options-callback-err-cookies">
<h4><code class="docutils literal notranslate"><span class="pre">.getCookies(currentUrl[,</span> <span class="pre">options][,</span> <span class="pre">callback(err,</span> <span class="pre">cookies)])</span></code><a class="headerlink" href="#getcookies-currenturl-options-callback-err-cookies" title="Link to this heading">¶</a></h4>
<p>Retrieve the list of cookies that can be sent in a Cookie header for the current URL. Returns a promise if a callback is not provided.</p>
<p>Returns an array of <code class="docutils literal notranslate"><span class="pre">Cookie</span></code> objects, sorted by default using <a class="reference internal" href="#cookiecomparea-b"><span class="xref myst"><code class="docutils literal notranslate"><span class="pre">cookieCompare</span></code></span></a>.</p>
<p>If an error is encountered it’s passed as <code class="docutils literal notranslate"><span class="pre">err</span></code> to the callback, otherwise an array of <code class="docutils literal notranslate"><span class="pre">Cookie</span></code> objects is passed. The array is sorted with <code class="docutils literal notranslate"><span class="pre">cookieCompare()</span></code> unless the <code class="docutils literal notranslate"><span class="pre">{sort:false}</span></code> option is given.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">options</span></code> object can be omitted and can have the following properties:</p>
<ul class="simple">
<li><p><em>http</em> - boolean - default <code class="docutils literal notranslate"><span class="pre">true</span></code> - indicates if this is an HTTP or non-HTTP API. Affects <code class="docutils literal notranslate"><span class="pre">HttpOnly</span></code> cookies.</p></li>
<li><p><em>secure</em> - boolean - autodetect from URL - indicates if this is a “Secure” API. If the currentUrl starts with <code class="docutils literal notranslate"><span class="pre">https:</span></code> or <code class="docutils literal notranslate"><span class="pre">wss:</span></code> then this is defaulted to <code class="docutils literal notranslate"><span class="pre">true</span></code>, otherwise <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
<li><p><em>now</em> - Date - default <code class="docutils literal notranslate"><span class="pre">new</span> <span class="pre">Date()</span></code> - what to use for the creation or access time of cookies</p></li>
<li><p><em>expire</em> - boolean - default <code class="docutils literal notranslate"><span class="pre">true</span></code> - perform expiry-time checking of cookies and asynchronously remove expired cookies from the store. Using <code class="docutils literal notranslate"><span class="pre">false</span></code> returns expired cookies and does <strong>not</strong> remove them from the store (which is potentially useful for replaying Set-Cookie headers).</p></li>
<li><p><em>allPaths</em> - boolean - default <code class="docutils literal notranslate"><span class="pre">false</span></code> - if <code class="docutils literal notranslate"><span class="pre">true</span></code>, do not scope cookies by path. The default uses RFC-compliant path scoping. <strong>Note</strong>: may not be supported by the underlying store (the default <code class="docutils literal notranslate"><span class="pre">MemoryCookieStore</span></code> supports it).</p></li>
<li><p><em>sameSiteContext</em> - string - default unset - Set this to <code class="docutils literal notranslate"><span class="pre">'none'</span></code>, <code class="docutils literal notranslate"><span class="pre">'lax'</span></code>, or <code class="docutils literal notranslate"><span class="pre">'strict'</span></code> to enforce SameSite cookies upon retrieval. See <a class="reference internal" href="#samesite-cookies"><span class="xref myst">SameSite Cookies</span></a> below.</p></li>
<li><p><em>sort</em> - boolean - whether to sort the list of cookies.</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">.lastAccessed</span></code> property of the returned cookies will have been updated.</p>
</section>
<section id="getcookiessync-currenturl-options">
<h4><code class="docutils literal notranslate"><span class="pre">.getCookiesSync(currentUrl,</span> <span class="pre">[{options}])</span></code><a class="headerlink" href="#getcookiessync-currenturl-options" title="Link to this heading">¶</a></h4>
<p>Synchronous version of <a class="reference internal" href="#getcookiescurrenturl-options-callbackerr-cookies"><span class="xref myst"><code class="docutils literal notranslate"><span class="pre">getCookies</span></code></span></a>; only works with synchronous stores (for example, the default <code class="docutils literal notranslate"><span class="pre">MemoryCookieStore</span></code>).</p>
</section>
<section id="getcookiestring">
<h4><code class="docutils literal notranslate"><span class="pre">.getCookieString(...)</span></code><a class="headerlink" href="#getcookiestring" title="Link to this heading">¶</a></h4>
<p>Accepts the same options as <a class="reference internal" href="#getcookiescurrenturl-options-callbackerr-cookies"><span class="xref myst"><code class="docutils literal notranslate"><span class="pre">.getCookies()</span></code></span></a> but returns a string suitable for a Cookie header rather than an Array.</p>
</section>
<section id="getcookiestringsync">
<h4><code class="docutils literal notranslate"><span class="pre">.getCookieStringSync(...)</span></code><a class="headerlink" href="#getcookiestringsync" title="Link to this heading">¶</a></h4>
<p>Synchronous version of <a class="reference internal" href="#getcookiestring"><span class="xref myst"><code class="docutils literal notranslate"><span class="pre">getCookieString</span></code></span></a>; only works with synchronous stores (for example, the default <code class="docutils literal notranslate"><span class="pre">MemoryCookieStore</span></code>).</p>
</section>
<section id="getsetcookiestrings">
<h4><code class="docutils literal notranslate"><span class="pre">.getSetCookieStrings(...)</span></code><a class="headerlink" href="#getsetcookiestrings" title="Link to this heading">¶</a></h4>
<p>Returns an array of strings suitable for <strong>Set-Cookie</strong> headers. Accepts the same options as <a class="reference internal" href="#getcookiescurrenturl-options-callbackerr-cookies"><span class="xref myst"><code class="docutils literal notranslate"><span class="pre">.getCookies()</span></code></span></a>. Simply maps the cookie array via <code class="docutils literal notranslate"><span class="pre">.toString()</span></code>.</p>
</section>
<section id="getsetcookiestringssync">
<h4><code class="docutils literal notranslate"><span class="pre">.getSetCookieStringsSync(...)</span></code><a class="headerlink" href="#getsetcookiestringssync" title="Link to this heading">¶</a></h4>
<p>Synchronous version of <a class="reference internal" href="#getsetcookiestrings"><span class="xref myst"><code class="docutils literal notranslate"><span class="pre">getSetCookieStrings</span></code></span></a>; only works with synchronous stores (for example, the default <code class="docutils literal notranslate"><span class="pre">MemoryCookieStore</span></code>).</p>
</section>
<section id="serialize-callback-err-serializedobject">
<h4><code class="docutils literal notranslate"><span class="pre">.serialize([callback(err,</span> <span class="pre">serializedObject)])</span></code><a class="headerlink" href="#serialize-callback-err-serializedobject" title="Link to this heading">¶</a></h4>
<p>Returns a promise if a callback is not provided.</p>
<p>Serialize the Jar if the underlying store supports <code class="docutils literal notranslate"><span class="pre">.getAllCookies</span></code>.</p>
<blockquote>
<div><p><strong>NOTE</strong>: Custom <code class="docutils literal notranslate"><span class="pre">Cookie</span></code> properties are discarded. If you want a property to be serialized, add the property name to the <code class="docutils literal notranslate"><span class="pre">Cookie.serializableProperties</span></code> Array.</p>
</div></blockquote>
<p>See <a class="reference internal" href="#serialization-format"><span class="xref myst">Serialization Format</span></a>.</p>
</section>
<section id="serializesync">
<h4><code class="docutils literal notranslate"><span class="pre">.serializeSync()</span></code><a class="headerlink" href="#serializesync" title="Link to this heading">¶</a></h4>
<p>Synchronous version of <a class="reference internal" href="#serializecallbackerr-serializedobject"><span class="xref myst"><code class="docutils literal notranslate"><span class="pre">serialize</span></code></span></a>; only works with synchronous stores (for example, the default <code class="docutils literal notranslate"><span class="pre">MemoryCookieStore</span></code>).</p>
</section>
<section id="id1">
<h4><code class="docutils literal notranslate"><span class="pre">.toJSON()</span></code><a class="headerlink" href="#id1" title="Link to this heading">¶</a></h4>
<p>Alias of <a class="reference internal" href="#serializesync"><span class="xref myst"><code class="docutils literal notranslate"><span class="pre">.serializeSync()</span></code></span></a> for the convenience of <code class="docutils literal notranslate"><span class="pre">JSON.stringify(cookiejar)</span></code>.</p>
</section>
<section id="cookiejar-deserialize-serialized-store-callback-err-object">
<h4><code class="docutils literal notranslate"><span class="pre">CookieJar.deserialize(serialized[,</span> <span class="pre">store][,</span> <span class="pre">callback(err,</span> <span class="pre">object)])</span></code><a class="headerlink" href="#cookiejar-deserialize-serialized-store-callback-err-object" title="Link to this heading">¶</a></h4>
<p>A new Jar is created and the serialized Cookies are added to the underlying store. Each <code class="docutils literal notranslate"><span class="pre">Cookie</span></code> is added via <code class="docutils literal notranslate"><span class="pre">store.putCookie</span></code> in the order in which they appear in the serialization. A promise is returned if a callback is not provided.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">store</span></code> argument is optional, but should be an instance of <code class="docutils literal notranslate"><span class="pre">Store</span></code>. By default, a new instance of <code class="docutils literal notranslate"><span class="pre">MemoryCookieStore</span></code> is created.</p>
<p>As a convenience, if <code class="docutils literal notranslate"><span class="pre">serialized</span></code> is a string, it is passed through <code class="docutils literal notranslate"><span class="pre">JSON.parse</span></code> first.</p>
</section>
<section id="cookiejar-deserializesync-serialized-store">
<h4><code class="docutils literal notranslate"><span class="pre">CookieJar.deserializeSync(serialized[,</span> <span class="pre">store])</span></code><a class="headerlink" href="#cookiejar-deserializesync-serialized-store" title="Link to this heading">¶</a></h4>
<p>Sync version of <a class="reference internal" href="#cookiejardeserializeserialized-store-callbackerr-object"><span class="xref myst"><code class="docutils literal notranslate"><span class="pre">.deserialize</span></code></span></a>; only works with synchronous stores (for example, the default <code class="docutils literal notranslate"><span class="pre">MemoryCookieStore</span></code>).</p>
</section>
<section id="cookiejar-fromjson-string">
<h4><code class="docutils literal notranslate"><span class="pre">CookieJar.fromJSON(string)</span></code><a class="headerlink" href="#cookiejar-fromjson-string" title="Link to this heading">¶</a></h4>
<p>Alias of <a class="reference internal" href="#cookiejardeserializesyncserialized-store"><span class="xref myst"><code class="docutils literal notranslate"><span class="pre">.deserializeSync</span></code></span></a> to provide consistency with <a class="reference internal" href="#cookiefromjsonstrorobj"><span class="xref myst"><code class="docutils literal notranslate"><span class="pre">Cookie.fromJSON()</span></code></span></a>.</p>
</section>
<section id="clone-store-callback-err-cloned">
<h4><code class="docutils literal notranslate"><span class="pre">.clone([store][,</span> <span class="pre">callback(err,</span> <span class="pre">cloned))</span></code><a class="headerlink" href="#clone-store-callback-err-cloned" title="Link to this heading">¶</a></h4>
<p>Produces a deep clone of this jar. Modifications to the original do not affect the clone, and vice versa. Returns a promise if a callback is not provided.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">store</span></code> argument is optional, but should be an instance of <code class="docutils literal notranslate"><span class="pre">Store</span></code>. By default, a new instance of <code class="docutils literal notranslate"><span class="pre">MemoryCookieStore</span></code> is created. Transferring between store types is supported so long as the source implements <code class="docutils literal notranslate"><span class="pre">.getAllCookies()</span></code> and the destination implements <code class="docutils literal notranslate"><span class="pre">.putCookie()</span></code>.</p>
</section>
<section id="clonesync-store">
<h4><code class="docutils literal notranslate"><span class="pre">.cloneSync([store])</span></code><a class="headerlink" href="#clonesync-store" title="Link to this heading">¶</a></h4>
<p>Synchronous version of <a class="reference internal" href="#clonestore-callbackerr-cloned"><span class="xref myst"><code class="docutils literal notranslate"><span class="pre">.clone</span></code></span></a>, returning a new <code class="docutils literal notranslate"><span class="pre">CookieJar</span></code> instance.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">store</span></code> argument is optional, but must be a <em>synchronous</em> <code class="docutils literal notranslate"><span class="pre">Store</span></code> instance if specified. If not passed, a new instance of <code class="docutils literal notranslate"><span class="pre">MemoryCookieStore</span></code> is used.</p>
<p>The <em>source</em> and <em>destination</em> must both be synchronous <code class="docutils literal notranslate"><span class="pre">Store</span></code>s. If one or both stores are asynchronous, use <code class="docutils literal notranslate"><span class="pre">.clone</span></code> instead. Recall that <code class="docutils literal notranslate"><span class="pre">MemoryCookieStore</span></code> supports both synchronous and asynchronous API calls.</p>
</section>
<section id="removeallcookies-callback-err">
<h4><code class="docutils literal notranslate"><span class="pre">.removeAllCookies([callback(err)])</span></code><a class="headerlink" href="#removeallcookies-callback-err" title="Link to this heading">¶</a></h4>
<p>Removes all cookies from the jar. Returns a promise if a callback is not provided.</p>
<p>This is a new backwards-compatible feature of <code class="docutils literal notranslate"><span class="pre">tough-cookie</span></code> version 2.5, so not all Stores will implement it efficiently. For Stores that do not implement <code class="docutils literal notranslate"><span class="pre">removeAllCookies</span></code>, the fallback is to call <code class="docutils literal notranslate"><span class="pre">removeCookie</span></code> after <code class="docutils literal notranslate"><span class="pre">getAllCookies</span></code>. If <code class="docutils literal notranslate"><span class="pre">getAllCookies</span></code> fails or isn’t implemented in the Store, that error is returned. If one or more of the <code class="docutils literal notranslate"><span class="pre">removeCookie</span></code> calls fail, only the first error is returned.</p>
</section>
<section id="removeallcookiessync">
<h4><code class="docutils literal notranslate"><span class="pre">.removeAllCookiesSync()</span></code><a class="headerlink" href="#removeallcookiessync" title="Link to this heading">¶</a></h4>
<p>Sync version of <a class="reference internal" href="#removeallcookiescallbackerr"><span class="xref myst"><code class="docutils literal notranslate"><span class="pre">.removeAllCookies()</span></code></span></a>; only works with synchronous stores (for example, the default <code class="docutils literal notranslate"><span class="pre">MemoryCookieStore</span></code>).</p>
</section>
</section>
<section id="store">
<h3>Store<a class="headerlink" href="#store" title="Link to this heading">¶</a></h3>
<p>Base class for CookieJar stores. Available as <code class="docutils literal notranslate"><span class="pre">tough.Store</span></code>.</p>
</section>
<section id="store-api">
<h3>Store API<a class="headerlink" href="#store-api" title="Link to this heading">¶</a></h3>
<p>The storage model for each <code class="docutils literal notranslate"><span class="pre">CookieJar</span></code> instance can be replaced with a custom implementation. The default is <code class="docutils literal notranslate"><span class="pre">MemoryCookieStore</span></code> which can be found in <a class="reference external" href="https://github.com/salesforce/tough-cookie/blob/master/lib/memstore.js"><code class="docutils literal notranslate"><span class="pre">lib/memstore.js</span></code></a>. The API uses continuation-passing-style to allow for asynchronous stores.</p>
<p>Stores should inherit from the base <code class="docutils literal notranslate"><span class="pre">Store</span></code> class, which is available as a top-level export.</p>
<p>Stores are asynchronous by default, but if <code class="docutils literal notranslate"><span class="pre">store.synchronous</span></code> is set to <code class="docutils literal notranslate"><span class="pre">true</span></code>, then the <code class="docutils literal notranslate"><span class="pre">*Sync</span></code> methods of the containing <code class="docutils literal notranslate"><span class="pre">CookieJar</span></code> can be used.</p>
<p>All <code class="docutils literal notranslate"><span class="pre">domain</span></code> parameters are normalized before calling.</p>
<p>The Cookie store must have all of the following methods. Note that asynchronous implementations <strong>must</strong> support callback parameters.</p>
<section id="store-findcookie-domain-path-key-callback-err-cookie">
<h4><code class="docutils literal notranslate"><span class="pre">store.findCookie(domain,</span> <span class="pre">path,</span> <span class="pre">key,</span> <span class="pre">callback(err,</span> <span class="pre">cookie))</span></code><a class="headerlink" href="#store-findcookie-domain-path-key-callback-err-cookie" title="Link to this heading">¶</a></h4>
<p>Retrieve a cookie with the given domain, path, and key (name). The RFC maintains that exactly one of these cookies should exist in a store. If the store is using versioning, this means that the latest or newest such cookie should be returned.</p>
<p>Callback takes an error and the resulting <code class="docutils literal notranslate"><span class="pre">Cookie</span></code> object. If no cookie is found then <code class="docutils literal notranslate"><span class="pre">null</span></code> MUST be passed instead (that is, not an error).</p>
</section>
<section id="store-findcookies-domain-path-allowspecialusedomain-callback-err-cookies">
<h4><code class="docutils literal notranslate"><span class="pre">store.findCookies(domain,</span> <span class="pre">path,</span> <span class="pre">allowSpecialUseDomain,</span> <span class="pre">callback(err,</span> <span class="pre">cookies))</span></code><a class="headerlink" href="#store-findcookies-domain-path-allowspecialusedomain-callback-err-cookies" title="Link to this heading">¶</a></h4>
<p>Locates cookies matching the given domain and path. This is most often called in the context of <a class="reference internal" href="#getcookiescurrenturl-options-callbackerr-cookies"><span class="xref myst"><code class="docutils literal notranslate"><span class="pre">cookiejar.getCookies()</span></code></span></a>.</p>
<p>If no cookies are found, the callback MUST be passed an empty array.</p>
<p>The resulting list is checked for applicability to the current request according to the RFC (domain-match, path-match, http-only-flag, secure-flag, expiry, and so on), so it’s OK to use an optimistic search algorithm when implementing this method. However, the search algorithm used SHOULD try to find cookies that <code class="docutils literal notranslate"><span class="pre">domainMatch()</span></code> the domain and <code class="docutils literal notranslate"><span class="pre">pathMatch()</span></code> the path in order to limit the amount of checking that needs to be done.</p>
<p>As of version 0.9.12, the <code class="docutils literal notranslate"><span class="pre">allPaths</span></code> option to <code class="docutils literal notranslate"><span class="pre">cookiejar.getCookies()</span></code> above causes the path here to be <code class="docutils literal notranslate"><span class="pre">null</span></code>. If the path is <code class="docutils literal notranslate"><span class="pre">null</span></code>, path-matching MUST NOT be performed (that is, domain-matching only).</p>
</section>
<section id="store-putcookie-cookie-callback-err">
<h4><code class="docutils literal notranslate"><span class="pre">store.putCookie(cookie,</span> <span class="pre">callback(err))</span></code><a class="headerlink" href="#store-putcookie-cookie-callback-err" title="Link to this heading">¶</a></h4>
<p>Adds a new cookie to the store. The implementation SHOULD replace any existing cookie with the same <code class="docutils literal notranslate"><span class="pre">.domain</span></code>, <code class="docutils literal notranslate"><span class="pre">.path</span></code>, and <code class="docutils literal notranslate"><span class="pre">.key</span></code> properties. Depending on the nature of the implementation, it’s possible that between the call to <code class="docutils literal notranslate"><span class="pre">fetchCookie</span></code> and <code class="docutils literal notranslate"><span class="pre">putCookie</span></code> that a duplicate <code class="docutils literal notranslate"><span class="pre">putCookie</span></code> can occur.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">cookie</span></code> object MUST NOT be modified; as the caller has already updated the <code class="docutils literal notranslate"><span class="pre">.creation</span></code> and <code class="docutils literal notranslate"><span class="pre">.lastAccessed</span></code> properties.</p>
<p>Pass an error if the cookie cannot be stored.</p>
</section>
<section id="store-updatecookie-oldcookie-newcookie-callback-err">
<h4><code class="docutils literal notranslate"><span class="pre">store.updateCookie(oldCookie,</span> <span class="pre">newCookie,</span> <span class="pre">callback(err))</span></code><a class="headerlink" href="#store-updatecookie-oldcookie-newcookie-callback-err" title="Link to this heading">¶</a></h4>
<p>Update an existing cookie. The implementation MUST update the <code class="docutils literal notranslate"><span class="pre">.value</span></code> for a cookie with the same <code class="docutils literal notranslate"><span class="pre">domain</span></code>, <code class="docutils literal notranslate"><span class="pre">.path</span></code>, and <code class="docutils literal notranslate"><span class="pre">.key</span></code>. The implementation SHOULD check that the old value in the store is equivalent to <code class="docutils literal notranslate"><span class="pre">oldCookie</span></code> - how the conflict is resolved is up to the store.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">.lastAccessed</span></code> property is always different between the two objects (to the precision possible via JavaScript’s clock). Both <code class="docutils literal notranslate"><span class="pre">.creation</span></code> and <code class="docutils literal notranslate"><span class="pre">.creationIndex</span></code> are guaranteed to be the same. Stores MAY ignore or defer the <code class="docutils literal notranslate"><span class="pre">.lastAccessed</span></code> change at the cost of affecting how cookies are selected for automatic deletion (for example, least-recently-used, which is up to the store to implement).</p>
<p>Stores may wish to optimize changing the <code class="docutils literal notranslate"><span class="pre">.value</span></code> of the cookie in the store versus storing a new cookie. If the implementation doesn’t define this method, a stub that calls <a class="reference internal" href="#storeputcookiecookie-callbackerr"><span class="xref myst"><code class="docutils literal notranslate"><span class="pre">putCookie</span></code></span></a> is added to the store object.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">newCookie</span></code> and <code class="docutils literal notranslate"><span class="pre">oldCookie</span></code> objects MUST NOT be modified.</p>
<p>Pass an error if the newCookie cannot be stored.</p>
</section>
<section id="store-removecookie-domain-path-key-callback-err">
<h4><code class="docutils literal notranslate"><span class="pre">store.removeCookie(domain,</span> <span class="pre">path,</span> <span class="pre">key,</span> <span class="pre">callback(err))</span></code><a class="headerlink" href="#store-removecookie-domain-path-key-callback-err" title="Link to this heading">¶</a></h4>
<p>Remove a cookie from the store (see notes on <a class="reference internal" href="#storefindcookiedomain-path-key-callbackerr-cookie"><span class="xref myst"><code class="docutils literal notranslate"><span class="pre">findCookie</span></code></span></a> about the uniqueness constraint).</p>
<p>The implementation MUST NOT pass an error if the cookie doesn’t exist, and only pass an error due to the failure to remove an existing cookie.</p>
</section>
<section id="store-removecookies-domain-path-callback-err">
<h4><code class="docutils literal notranslate"><span class="pre">store.removeCookies(domain,</span> <span class="pre">path,</span> <span class="pre">callback(err))</span></code><a class="headerlink" href="#store-removecookies-domain-path-callback-err" title="Link to this heading">¶</a></h4>
<p>Removes matching cookies from the store. The <code class="docutils literal notranslate"><span class="pre">path</span></code> parameter is optional and if missing, means all paths in a domain should be removed.</p>
<p>Pass an error ONLY if removing any existing cookies failed.</p>
</section>
<section id="store-removeallcookies-callback-err">
<h4><code class="docutils literal notranslate"><span class="pre">store.removeAllCookies(callback(err))</span></code><a class="headerlink" href="#store-removeallcookies-callback-err" title="Link to this heading">¶</a></h4>
<p><em>Optional</em>. Removes all cookies from the store.</p>
<p>Pass an error if one or more cookies can’t be removed.</p>
</section>
<section id="store-getallcookies-callback-err-cookies">
<h4><code class="docutils literal notranslate"><span class="pre">store.getAllCookies(callback(err,</span> <span class="pre">cookies))</span></code><a class="headerlink" href="#store-getallcookies-callback-err-cookies" title="Link to this heading">¶</a></h4>
<p><em>Optional</em>. Produces an <code class="docutils literal notranslate"><span class="pre">Array</span></code> of all cookies during <a class="reference internal" href="#serializecallbackerr-serializedobject"><span class="xref myst"><code class="docutils literal notranslate"><span class="pre">jar.serialize()</span></code></span></a>. The items in the array can be true <code class="docutils literal notranslate"><span class="pre">Cookie</span></code> objects or generic <code class="docutils literal notranslate"><span class="pre">Object</span></code>s with the <a class="reference internal" href="#serialization-format"><span class="xref myst">Serialization Format</span></a> data structure.</p>
<p>Cookies SHOULD be returned in creation order to preserve sorting via <a class="reference internal" href="#cookiecomparea-b"><span class="xref myst"><code class="docutils literal notranslate"><span class="pre">compareCookie()</span></code></span></a>. For reference, <code class="docutils literal notranslate"><span class="pre">MemoryCookieStore</span></code> sorts by <code class="docutils literal notranslate"><span class="pre">.creationIndex</span></code> since it uses true <code class="docutils literal notranslate"><span class="pre">Cookie</span></code> objects internally. If you don’t return the cookies in creation order, they’ll still be sorted by creation time, but this only has a precision of 1-ms. See <code class="docutils literal notranslate"><span class="pre">cookieCompare</span></code> for more detail.</p>
<p>Pass an error if retrieval fails.</p>
<p><strong>Note</strong>: Not all Stores can implement this due to technical limitations, so it is optional.</p>
</section>
</section>
<section id="memorycookiestore">
<h3>MemoryCookieStore<a class="headerlink" href="#memorycookiestore" title="Link to this heading">¶</a></h3>
<p>Inherits from <code class="docutils literal notranslate"><span class="pre">Store</span></code>.</p>
<p>A just-in-memory CookieJar synchronous store implementation, used by default. Despite being a synchronous implementation, it’s usable with both the synchronous and asynchronous forms of the <code class="docutils literal notranslate"><span class="pre">CookieJar</span></code> API. Supports serialization, <code class="docutils literal notranslate"><span class="pre">getAllCookies</span></code>, and <code class="docutils literal notranslate"><span class="pre">removeAllCookies</span></code>.</p>
</section>
<section id="community-cookie-stores">
<h3>Community Cookie Stores<a class="headerlink" href="#community-cookie-stores" title="Link to this heading">¶</a></h3>
<p>These are some Store implementations authored and maintained by the community. They aren’t official and we don’t vouch for them but you may be interested to have a look:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/JSBizon/db-cookie-store"><code class="docutils literal notranslate"><span class="pre">db-cookie-store</span></code></a>: SQL including SQLite-based databases</p></li>
<li><p><a class="reference external" href="https://github.com/JSBizon/file-cookie-store"><code class="docutils literal notranslate"><span class="pre">file-cookie-store</span></code></a>: Netscape cookie file format on disk</p></li>
<li><p><a class="reference external" href="https://github.com/benkroeger/redis-cookie-store"><code class="docutils literal notranslate"><span class="pre">redis-cookie-store</span></code></a>: Redis</p></li>
<li><p><a class="reference external" href="https://github.com/mitsuru/tough-cookie-filestore"><code class="docutils literal notranslate"><span class="pre">tough-cookie-filestore</span></code></a>: JSON on disk</p></li>
<li><p><a class="reference external" href="https://github.com/exponentjs/tough-cookie-web-storage-store"><code class="docutils literal notranslate"><span class="pre">tough-cookie-web-storage-store</span></code></a>: DOM localStorage and sessionStorage</p></li>
</ul>
</section>
</section>
<section id="serialization-format">
<h2>Serialization Format<a class="headerlink" href="#serialization-format" title="Link to this heading">¶</a></h2>
<p><strong>NOTE</strong>: If you want to have custom <code class="docutils literal notranslate"><span class="pre">Cookie</span></code> properties serialized, add the property name to <code class="docutils literal notranslate"><span class="pre">Cookie.serializableProperties</span></code>.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span id="1-1"><span class="w">  </span><span class="p">{</span>
</span><span id="1-2"><span class="w">    </span><span class="c1">// The version of tough-cookie that serialized this jar.</span>
</span><span id="1-3"><span class="w">    </span><span class="nx">version</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;tough-cookie@1.x.y&#39;</span><span class="p">,</span>
</span><span id="1-4">
</span><span id="1-5"><span class="w">    </span><span class="c1">// add the store type, to make humans happy:</span>
</span><span id="1-6"><span class="w">    </span><span class="nx">storeType</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;MemoryCookieStore&#39;</span><span class="p">,</span>
</span><span id="1-7">
</span><span id="1-8"><span class="w">    </span><span class="c1">// CookieJar configuration:</span>
</span><span id="1-9"><span class="w">    </span><span class="nx">rejectPublicSuffixes</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
</span><span id="1-10"><span class="w">    </span><span class="c1">// ... future items go here</span>
</span><span id="1-11">
</span><span id="1-12"><span class="w">    </span><span class="c1">// Gets filled from jar.store.getAllCookies():</span>
</span><span id="1-13"><span class="w">    </span><span class="nx">cookies</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="1-14"><span class="w">      </span><span class="p">{</span>
</span><span id="1-15"><span class="w">        </span><span class="nx">key</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
</span><span id="1-16"><span class="w">        </span><span class="nx">value</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
</span><span id="1-17"><span class="w">        </span><span class="c1">// ...</span>
</span><span id="1-18"><span class="w">        </span><span class="cm">/* other Cookie.serializableProperties go here */</span>
</span><span id="1-19"><span class="w">      </span><span class="p">}</span>
</span><span id="1-20"><span class="w">    </span><span class="p">]</span>
</span><span id="1-21"><span class="w">  </span><span class="p">}</span>
</span></pre></div>
</div>
</section>
<section id="rfc-6265bis">
<h2>RFC 6265bis<a class="headerlink" href="#rfc-6265bis" title="Link to this heading">¶</a></h2>
<p>Support for RFC 6265bis revision 02 is being developed. Since this is a bit of an omnibus revision to the RFC 6252, support is broken up into the functional areas.</p>
<section id="leave-secure-cookies-alone">
<h3>Leave Secure Cookies Alone<a class="headerlink" href="#leave-secure-cookies-alone" title="Link to this heading">¶</a></h3>
<p>Not yet supported.</p>
<p>This change makes it so that if a cookie is sent from the server to the client with a <code class="docutils literal notranslate"><span class="pre">Secure</span></code> attribute, the channel must also be secure or the cookie is ignored.</p>
</section>
<section id="samesite-cookies">
<h3>SameSite Cookies<a class="headerlink" href="#samesite-cookies" title="Link to this heading">¶</a></h3>
<p>Supported.</p>
<p>This change makes it possible for servers, and supporting clients, to mitigate certain types of CSRF attacks by disallowing <code class="docutils literal notranslate"><span class="pre">SameSite</span></code> cookies from being sent cross-origin.</p>
<p>On the Cookie object itself, you can get or set the <code class="docutils literal notranslate"><span class="pre">.sameSite</span></code> attribute, which is serialized into the <code class="docutils literal notranslate"><span class="pre">SameSite=</span></code> cookie attribute. When unset or <code class="docutils literal notranslate"><span class="pre">undefined</span></code>, no <code class="docutils literal notranslate"><span class="pre">SameSite=</span></code> attribute is serialized. The valid values of this attribute are <code class="docutils literal notranslate"><span class="pre">'none'</span></code>, <code class="docutils literal notranslate"><span class="pre">'lax'</span></code>, or <code class="docutils literal notranslate"><span class="pre">'strict'</span></code>. Other values are serialized as-is.</p>
<p>When parsing cookies with a <code class="docutils literal notranslate"><span class="pre">SameSite</span></code> cookie attribute, values other than <code class="docutils literal notranslate"><span class="pre">'lax'</span></code> or <code class="docutils literal notranslate"><span class="pre">'strict'</span></code> are parsed as <code class="docutils literal notranslate"><span class="pre">'none'</span></code>. For example, <code class="docutils literal notranslate"><span class="pre">SomeCookie=SomeValue;</span> <span class="pre">SameSite=garbage</span></code> parses so that <code class="docutils literal notranslate"><span class="pre">cookie.sameSite</span> <span class="pre">===</span> <span class="pre">'none'</span></code>.</p>
<p>In order to support SameSite cookies, you must provide a <code class="docutils literal notranslate"><span class="pre">sameSiteContext</span></code> option to <em>both</em> <code class="docutils literal notranslate"><span class="pre">setCookie</span></code> and <code class="docutils literal notranslate"><span class="pre">getCookies</span></code>. Valid values for this option are just like for the Cookie object, but have particular meanings:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'strict'</span></code> mode - If the request is on the same “site for cookies” (see the RFC draft for more information), pass this option to add a layer of defense against CSRF.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'lax'</span></code> mode - If the request is from another site, <em>but</em> is directly because of navigation by the user, such as, <code class="docutils literal notranslate"><span class="pre">&lt;link</span> <span class="pre">type=prefetch&gt;</span></code> or <code class="docutils literal notranslate"><span class="pre">&lt;a</span> <span class="pre">href=&quot;...&quot;&gt;</span></code>, pass <code class="docutils literal notranslate"><span class="pre">sameSiteContext:</span> <span class="pre">'lax'</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'none'</span></code> - Otherwise, pass <code class="docutils literal notranslate"><span class="pre">sameSiteContext:</span> <span class="pre">'none'</span></code> (this indicates a cross-origin request).</p></li>
<li><p>unset/<code class="docutils literal notranslate"><span class="pre">undefined</span></code> - SameSite <strong>is not</strong> be enforced! This can be a valid use-case for when CSRF isn’t in the threat model of the system being built.</p></li>
</ol>
<p>It is highly recommended that you read RFC 6265bis for fine details on SameSite cookies. In particular <a class="reference external" href="https://tools.ietf.org/html/draft-ietf-httpbis-rfc6265bis-02##section-8.8">Section 8.8</a> discusses security considerations and defense in depth.</p>
</section>
<section id="cookie-prefixes">
<h3>Cookie Prefixes<a class="headerlink" href="#cookie-prefixes" title="Link to this heading">¶</a></h3>
<p>Supported.</p>
<p>Cookie prefixes are a way to indicate that a given cookie was set with a set of attributes simply by inspecting the first few characters of the cookie’s name.</p>
<p>Cookie prefixes are defined in <a class="reference external" href="https://tools.ietf.org/html/draft-ietf-httpbis-rfc6265bis-03##section-4.1.3">Section 4.1.3 of 6265bis</a>.</p>
<p>Two prefixes are defined:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;__Secure-&quot;</span> <span class="pre">Prefix</span></code>: If a cookie’s name begins with a case-sensitive match for the string “__Secure-”, then the cookie was set with a “Secure” attribute.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;__Host-&quot;</span> <span class="pre">Prefix</span></code>: If a cookie’s name begins with a case-sensitive match for the string “__Host-”, then the cookie was set with a “Secure” attribute, a “Path” attribute with a value of “/”, and no “Domain” attribute.</p></li>
</ol>
<p>If <code class="docutils literal notranslate"><span class="pre">prefixSecurity</span></code> is enabled for <code class="docutils literal notranslate"><span class="pre">CookieJar</span></code>, then cookies that match the prefixes defined above but do not obey the attribute restrictions are not added.</p>
<p>You can define this functionality by passing in the <code class="docutils literal notranslate"><span class="pre">prefixSecurity</span></code> option to <code class="docutils literal notranslate"><span class="pre">CookieJar</span></code>. It can be one of 3 values:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">silent</span></code>: Enable cookie prefix checking but silently fail to add the cookie if conditions are not met. Default.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">strict</span></code>: Enable cookie prefix checking and error out if conditions are not met.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unsafe-disabled</span></code>: Disable cookie prefix checking.</p></li>
</ol>
<p>Note that if <code class="docutils literal notranslate"><span class="pre">ignoreError</span></code> is passed in as <code class="docutils literal notranslate"><span class="pre">true</span></code> then the error is silent regardless of the <code class="docutils literal notranslate"><span class="pre">prefixSecurity</span></code> option (assuming it’s enabled).</p>
</section>
</section>
<section id="copyright-and-license">
<h2>Copyright and License<a class="headerlink" href="#copyright-and-license" title="Link to this heading">¶</a></h2>
<p>BSD-3-Clause:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span><span id="1-1"> Copyright (c) 2015, Salesforce.com, Inc.
</span><span id="1-2"> All rights reserved.
</span><span id="1-3">
</span><span id="1-4"> Redistribution and use in source and binary forms, with or without
</span><span id="1-5"> modification, are permitted provided that the following conditions are met:
</span><span id="1-6">
</span><span id="1-7"> 1. Redistributions of source code must retain the above copyright notice,
</span><span id="1-8"> this list of conditions and the following disclaimer.
</span><span id="1-9">
</span><span id="1-10"> 2. Redistributions in binary form must reproduce the above copyright notice,
</span><span id="1-11"> this list of conditions and the following disclaimer in the documentation
</span><span id="1-12"> and/or other materials provided with the distribution.
</span><span id="1-13">
</span><span id="1-14"> 3. Neither the name of Salesforce.com nor the names of its contributors may
</span><span id="1-15"> be used to endorse or promote products derived from this software without
</span><span id="1-16"> specific prior written permission.
</span><span id="1-17">
</span><span id="1-18"> THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot;
</span><span id="1-19"> AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
</span><span id="1-20"> IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
</span><span id="1-21"> ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE
</span><span id="1-22"> LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
</span><span id="1-23"> CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
</span><span id="1-24"> SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
</span><span id="1-25"> INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
</span><span id="1-26"> CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
</span><span id="1-27"> ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
</span><span id="1-28"> POSSIBILITY OF SUCH DAMAGE.
</span></pre></div>
</div>
</section>
</section>

        </article>
        <button class="back-to-top" type="button">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
  </svg>
  <span>Reen al supro</span>
</button>
        
        
        
      </div>
    </div>
  </main>
</div>
<footer class="sy-foot">
  <div class="sy-foot-inner sy-container mx-auto">
    
    <div class="sy-foot-reserved md:flex justify-between items-center">
      <div class="sy-foot-copyright"><p>Copyright © 2024, Python Perú</p>
        
        <p>
          Made with
          
          <a href="https://www.sphinx-doc.org/">Sphinx</a> and
          
          <a href="https://shibuya.lepture.com">Shibuya theme</a>.
        </p>
      </div>
      <div class="sy-foot-socials">
      </div>
    </div>
  </div>
</footer></div>
      <script src="../../../_static/documentation_options.js?v=a20647df"></script>
      <script src="../../../_static/doctools.js?v=888ff710"></script>
      <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../../../_static/copybutton.js?v=f281be69"></script>
      <script>let toggleHintShow = 'Click to show';</script>
      <script>let toggleHintHide = 'Click to hide';</script>
      <script>let toggleOpenOnPrint = 'true';</script>
      <script src="../../../_static/togglebutton.js?v=4a39c7ea"></script>
      <script src="../../../_static/translations.js?v=efdbd0b9"></script>
      <script src="../../../_static/design-tabs.js?v=36754332"></script>
      <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
      <script src="../../../_static/shibuya.js?v=a2cf054a"></script>
      <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    
</body>
</html>